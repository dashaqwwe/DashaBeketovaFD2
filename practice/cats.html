<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <title>Document</title>
    <style>
      .card {
        width: 18rem;
      }
    </style>
  </head>
  <body>
    <input type="text" id="name" /> <br />
    <input type="text" id="age" /> <br />
    <input type="text" id="imgUrl" /> <br />
    <textarea id="descr"></textarea>
    <input type="submit" onclick="getData()" />

    <hr />
    <div id="cat"></div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      const el = document.getElementById("cat");
      let cats = [];

      function getData() {
        const name = document.getElementById("name");
        const age = document.getElementById("age");
        const imgUrl = document.getElementById("imgUrl");
        const descr = document.getElementById("descr");

        const item = {
          id: Math.random().toString().split(".")[1],
          name: name.value,
          age: age.value,
          imgUrl: imgUrl.value,
          descr: descr.value,
        };
        cats.push(item);
        view();
      }
      function view() {
        const card = document.querySelectorAll(".card");
        const cat = document.querySelector("#cat");
        if (card.length > 0) {
          cat.innerHTML = "";
        }

        for (let i = 0; i < cats.length; i++) {
          createCard(
            cats[i].imgUrl,
            cats[i].name,
            cats[i].age,
            cats[i].descr,
            cats[i].id
          );
        }
      }

      const deleteCard = (e) => {
        const { id } = e.currentTarget.dataset;
        const filteredCard = cats.filter((cat) => cat.id !== id);
        cats = [...filteredCard];
        view();
      };

      const createCard = (...data) => {
        const [imgUrl, name, age, descr, id] = data;

        const divCard = document.createElement("div");
        divCard.setAttribute("class", "card");
        divCard.setAttribute("data-id", id);
        divCard.addEventListener("click", deleteCard);

        const img = document.createElement("img");
        img.setAttribute("src", imgUrl);
        img.setAttribute("class", "card-img-top");
        const divBody = document.createElement("div");
        divBody.setAttribute("class", "card-body");
        const h5 = document.createElement("h5");
        h5.setAttribute("class", "card-title");
        const h5Text = document.createTextNode(`${name} ${age}`);
        h5.appendChild(h5Text);
        const p = document.createElement("p");
        p.setAttribute("class", "card-text");
        const pText = document.createTextNode(`${descr}`);
        p.appendChild(pText);

        const a = document.createElement("a");
        const aText = document.createTextNode("Delete");
        a.setAttribute("class", "btn btn-primary");
        a.appendChild(aText);

        divCard.appendChild(img);
        divBody.appendChild(h5);
        divBody.appendChild(p);
        divBody.appendChild(a);
        divCard.appendChild(divBody);
        el.appendChild(divCard);
      };
    </script>
  </body>
</html>
